# -*- coding: utf-8 -*-
"""PC01_Clase.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1eMl9i0FMBgZ8bxFiKeLxGgU2D9Fy60xb
"""

import streamlit as st
import pandas as pd

st.set_page_config(page_title="Sistema de Becas - Universidad San Gabriel", layout="wide")
st.title("ðŸŽ“ Sistema de EvaluaciÃ³n de Becas â€“ Universidad San Gabriel")

# Base de datos en memoria
if 'postulaciones' not in st.session_state:
    st.session_state.postulaciones = []

menu = st.sidebar.radio("MenÃº", [
    "ðŸ  Inicio",
    "ðŸ“ Postular a Beca",
    "ðŸ” EvaluaciÃ³n de Postulantes",
    "ðŸ“‹ Listado de Evaluados",
    "ðŸ“Š Panel de MÃ©tricas"
])

if menu == "ðŸ  Inicio":
    st.subheader("Bienvenido al sistema de becas")
    st.markdown("Este sistema permite simular el proceso de evaluaciÃ³n automÃ¡tica para becas acadÃ©micas.")
    st.markdown("_Desarrollado por: Dr. Michael Quinteros_")

elif menu == "ðŸ“ Postular a Beca":
    st.subheader("Formulario de PostulaciÃ³n")
    with st.form("form_postulacion"):
        nombre = st.text_input("Nombre completo")
        dni = st.text_input("DNI")
        promedio = st.slider("Promedio acadÃ©mico (0-20)", 0.0, 20.0, 14.0)
        economia = st.selectbox("SituaciÃ³n econÃ³mica", ["Alta", "Media", "Baja"])
        meritos = st.slider("Puntaje por mÃ©ritos (0-10)", 0, 10, 5)
        extracurricular = st.slider("ParticipaciÃ³n extracurricular (0-10)", 0, 10, 5)
        enviar = st.form_submit_button("Enviar postulaciÃ³n")
        if enviar:
            st.session_state.postulaciones.append({
                'ID': len(st.session_state.postulaciones) + 1,
                'Nombre': nombre,
                'DNI': dni,
                'Promedio': promedio,
                'EconomÃ­a': economia,
                'MÃ©ritos': meritos,
                'Extracurricular': extracurricular,
                'Puntaje Total': None,
                'Resultado': 'Pendiente'
            })
            st.success("PostulaciÃ³n registrada")

elif menu == "ðŸ” EvaluaciÃ³n de Postulantes":
    st.subheader("EvaluaciÃ³n automÃ¡tica")
    for p in st.session_state.postulaciones:
        if p['Puntaje Total'] is None:
            economia_score = {'Alta': 0, 'Media': 5, 'Baja': 10}[p['EconomÃ­a']]
            total = (p['Promedio'] * 2) + economia_score + (p['MÃ©ritos'] * 1.5) + (p['Extracurricular'] * 1.2)
            p['Puntaje Total'] = round(total, 2)
            p['Resultado'] = 'Seleccionado' if total >= 80 else 'No seleccionado'
    st.success("EvaluaciÃ³n completada")
    st.dataframe(pd.DataFrame(st.session_state.postulaciones))

elif menu == "ðŸ“‹ Listado de Evaluados":
    st.subheader("Listado de postulaciones evaluadas")
    st.dataframe(pd.DataFrame(st.session_state.postulaciones))

elif menu == "ðŸ“Š Panel de MÃ©tricas":
    st.subheader("Resumen del proceso")
    total = len(st.session_state.postulaciones)
    seleccionados = sum(1 for p in st.session_state.postulaciones if p['Resultado'] == 'Seleccionado')
    no_seleccionados = total - seleccionados
    st.metric("Total de postulantes", total)
    st.metric("Seleccionados", seleccionados)
    st.metric("No seleccionados", no_seleccionados)
    st.dataframe(pd.DataFrame(st.session_state.postulaciones))